<div class="max-w-2xl mx-auto">
  <h2 class="text-3xl font-bold text-gray-800 mb-6">Create New Recipe</h2>

  <div class="bg-white rounded-lg shadow-md p-8">
    <%= form_with model: @recipe, local: true, class: "space-y-6" do |form| %>
      <% if @recipe.errors.any? %>
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
          <h3 class="font-semibold mb-2"><%= pluralize(@recipe.errors.count, "error") %> prevented saving:</h3>
          <ul class="list-disc list-inside">
            <% @recipe.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div>
        <%= form.label :name, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_field :name,
            class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
            required: true %>
      </div>

      <div>
        <%= form.label :description, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_area :description,
            rows: 3,
            class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" %>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <%= form.label :prep_time, "Prep Time (minutes)", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.number_field :prep_time,
              min: 1,
              class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
              required: true %>
        </div>

        <div>
          <%= form.label :diet_type, class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.select :diet_type,
              options_for_select([["Veg", "veg"], ["Vegan", "vegan"]]),
              {},
              class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" %>
        </div>
      </div>

      <div>
        <%= form.label :visibility, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.select :visibility,
            options_for_select([["Public", "public"], ["Private", "private"]]),
            {},
            class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" %>
        <p class="mt-1 text-sm text-gray-500">Public recipes are visible to everyone. Private recipes are only visible to you.</p>
      </div>

      <div>
        <%= label_tag :ingredients_list, "Ingredients", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= text_field_tag :ingredients_list, nil,
            placeholder: "e.g., tomato, onion, garlic, salt",
            class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
            required: true %>
        <p class="mt-1 text-sm text-gray-500">Separate ingredients with commas. New ingredients will be created automatically.</p>
      </div>

      <div>
        <%= form.label :instructions, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_area :instructions,
            rows: 6,
            class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",
            required: true %>
      </div>

      <div>
        <%= form.submit "Create Recipe", class: "w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition duration-200 cursor-pointer" %>
      </div>
    <% end %>
  </div>
</div>
